# NixOS Configuration

This repository contains my NixOS setup built around the Hyprland window manager.
It is organised as a flake so multiple machines can reuse the same configuration.

## Features

- **Hyprland desktop** with Waybar, Kitty and Rofi enabled by default.
- **Dynamic theming** generated by Matugen and applied to Kitty, Waybar, Rofi, Hyprland and Dunst.
- **Wallpaper daemon** `swww` started automatically as a user service.
- **Dotfile modules** for Hyprland, Waybar, Kitty, Rofi, Dunst, Niri and Swappy.
- **Automatic host discovery** – any directory under `hosts/` becomes a build target.
- **Pre‑commit hook** checks that every host has a `hardware-configuration.nix` file.

## Getting started

1. Clone this repository on a fresh NixOS installation.
2. Generate hardware information for your machine and commit it:
   ```bash
   sudo nixos-generate-config --show-hardware-config > hosts/nixos/hardware-configuration.nix
   git add hosts/nixos/hardware-configuration.nix
   git commit -m "Add hardware configuration"
   ```
3. Build and switch to the configuration:
   ```bash
   sudo nixos-rebuild switch --flake .#nixos
   ```

The configuration expects a user called `martin` by default. If your user name is
different, update the `username` value in `flake.nix` and related files in
`hosts/common.nix` and `home.nix`.

## Repository layout

```
flake.nix      # main flake definition
home.nix       # Home‑Manager configuration
hosts/         # one directory per machine
modules/       # optional dotfile modules
scripts/       # helper scripts and git hooks
templates/     # Matugen color templates
```

The wallpaper selector script in `wallpaper-selector` lists images from
`~/Pictures/Wallpapers` and sets the selected file using `swww` and Matugen.

## Customisation

Edit `home.nix` to add packages or change shell aliases. Desktop settings are in
`dotfiles/`; see `docs/customization.md` for an overview of the most common
files to tweak.

Recent changes and improvements are described in `docs/changes.md`.
